<!DOCTYPE html>
<html lang="en">

<head>
	<script>
		const update_cache = async () => {
		document.getElementById("error").innerHTML = "";

		for (let i = 0; i < 20000;) {
            await fetch("https://www.clanwolf.net/apps/ASCard/data/mul_cache/cache_unitdetails.php?startindex=" + i).
				catch(error => {
                    document.getElementById("error").innerHTML = error + " index: " + i ;
				})
				i += 200;
				document.getElementById("num").innerHTML = i;
			}
		}
	</script>
</head>

<body>
<div id="status">
	Done: <span id="num">0</span>
</div>

<div id="error" style="color:red"></div>

<br><br>

<button onclick="update_cache()">
	Cache
</button>

<br><br>

<div>This will take a long time and look unresponsive!<br>Click on 'Cache' once and just wait!<br><br>
Check after updating to make sure all locally changed data is inserted again!<br>
There might be errors like: 'TypeError: Failed to fetch index: x'<br><br>
Maximum number is: 16000 (wait until this number is reached)</div>

</body>

</html>
